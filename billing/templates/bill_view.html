<!DOCTYPE html>
<html>
<head>
  <title>Billing Page</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
        rel="stylesheet">

  <style>
    .box {
        border: 1px solid #000;
        padding: 20px;
    }
    .line {
        border-top: 1px solid #000;
        margin: 20px 0;
    }
  </style>
</head>

<body class="container mt-4">

<div class="box">

  <h4 class="text-center mb-4">Billing Page</h4>

  <!-- Customer Email -->
  <p><strong>Customer Email:</strong> {{ bill.customer.email }}</p>

  <!-- Bill Section -->
  <h6>Bill section</h6>

  <table class="table table-bordered text-center">
    <thead>
      <tr>
        <th>Product ID</th>
        <th>Unit Price</th>
        <th>Quantity</th>
        <th>Purchase price</th>
        <th>Tax % for item</th>
        <th>Tax payable for item</th>
        <th>Total price of the item</th>
      </tr>
    </thead>
    <tbody>
      {% for item in bill.billitem_set.all %}
      <tr>
        <td>{{ item.product.product_id }}</td>
        <td>{{ item.product.unit_price }}</td>
        <td>{{ item.quantity }}</td>
        <td>{{ item.product.unit_price|floatformat:2 }}</td>
        <td>{{ item.product.tax_percentage }}%</td>
        <td>
          {{ item.product.unit_price|floatformat:2|add:"0"|floatformat:2 }}
        </td>
        <td>{{ item.total_price|floatformat:2 }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <!-- Totals -->
  <div class="text-end">
    <p>Total price without tax: <strong>{{ bill.total_price|floatformat:2 }}</strong></p>
    <p>Total tax payable: <strong>{{ bill.total_tax|floatformat:2 }}</strong></p>
    <p>Net price of the purchased item: <strong>{{ bill.net_price|floatformat:2 }}</strong></p>
    <p>Rounded down value of the purchased items net price:
       <strong>{{ rounded_net_price }}</strong></p>
    <p>Balance payable to the customer:
       <strong>{{ balance_amount }}</strong></p>
  </div>

  <div class="line"></div>

  <!-- Balance Denomination -->
  <h6 class="text-center">Balance Denomination:</h6>

  <div class="text-center">
    {% for d in balance_denoms %}
      <p>{{ d.value }} : {{ d.count }}</p>
    {% endfor %}
  </div>

</div>

</body>
</html>
